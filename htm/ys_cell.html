<!DOCTYPE html>
<html>
<head>
	<title>印順導師著作聞思</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="stylesheet" type="text/css" href="../css/common.css" />
	<link rel="stylesheet" type="text/css" href="../css/menutree.css" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<script src="../data/ffgl_kr_2014.js"></script>
	<script src="../data/auxData_0001.js"></script>
	<script src="../data/auxData_0002.js"></script>
<!--	<script src="../data/auxData_List.js"></script>-->
<!--	<script src="../data/auxJSON_List.js"></script>-->
	<script src="../data/pnj_style.js"></script>
	<script src="../data/pnj_book.js"></script>
	<script src="../data/ffgl_book.js"></script>
	
	<script src="../data/base_List.js"></script>
	<script src="../data/lecture_List.js"></script>
	<script src="../data/lesson_List.js"></script>
	<script src="../data/cuePoint_List.js"></script>
	
	<script src="../js/kEssayNode.js"></script>
	<script src="../js/search.js"></script>
	<script src="../js/menuTree.js"></script>
	<script src="../js/mysBooks.js"></script>
	<script src="../js/kEssay.js"></script>
	
	<script>
var mbIsPC = false;
var msSourceWords = "srcwords mobilSWcolor"; //引文字體、色，供 toHtml 參用於行動裝置
var msNoteareaBg = "div.notearea div.notearea_m"; //註解區背景色

var theBook = null;
var theAud = null;

var onLoad = function() {
	var q = JSON.parse(decodeURIComponent(location.search).substr(6));

	mbIsPC = q.isPC;

	document.getElementById("tit_booklecName").innerHTML = q.bkName + "：" + q.lecName;

	theAud = new mysAud();
	theBook = new mysBooks(q.bkId, q.lecId);
	fitDevice();
	theBook.fillBook();
	
	if (mbIsPC) {
		msSourceWords = "srcwords";
		msNoteareaBg = "div.notearea"; //註解區背景色
		
		if (window.addEventListener) {              
		    window.addEventListener("resize", rstPosition);
		} else if (window.attachEvent) {                 
		    window.attachEvent("onresize", rstPosition);
		}
	}
	
	var dlg = document.getElementById("dlgPageToc");
	if (window.addEventListener) {              
	    dlg.addEventListener("focusin", dlgFocusIn);
	} else if (window.attachEvent) {                 
	    dlg.attachEvent("onfocusin", dlgFocusIn);
	}

	rstPosition();
}

	</script>
</head>

<body onload="onLoad()">
<!--<span id="tit_booklecName"></span>- style="overflow:hidden;"-->
<div id="pnlEsyTool" class="dropdown" style="position:fixed; top:1em; right:1em;">
	<tbale><tr>
	<td>
	<button onclick="myFunction()" class="dropbtn">章</button>
	  <div id="myDropdown" class="dropdown-content"> </div></td>
	<td>
	<button onclick="togglePageNum(0)" class="dropbtn">目</button>
	</td>
	<td>
	<button onclick="togglePageNum(1)" class="dropbtn">頁</button>
	</td>
	<td>
	<button onclick="togglePageNum(2)" class="dropbtn">hr</button>
	</td>
	<td>
	<button onclick="doToggleBR(false)" class="dropbtn">段</button>
	</td>
	</tr></tbale>
</div>

<span id="tit_booklecName" style="font-size:90%;font-family:標楷體;font-weight:bold;"></span><br/>
<span id="try" style="width:80%;"></span>

<!--期別、著文、講義切換-->
<table id="tblShowPhrase" style="visibility:visible;background-color:lightGray;margin-top:3px;"><tr>
	<td><a id="goSite" href="" target="_blank">到</a></td>
	<td>
	<span id="dvPhase"><select><option>第 1 期 104 年</option><select><span>
	</td>
	<td id="tdPhrase">
<button id="toggleHandout" onclick="toggleHandout(this)" class="toggle">期別</button>
	</td>
	<td id="dvLesson" style="vertical-align: middle;">
		<select><option>104 年</option><select>
	</td>
	
	<td><button onclick="theAud.showCue()" style="margin-left:6px;">cue</button></td>
</tr></table>

<!--講義-->
	<table id="tblShowHandout" style="visibility:collapse;background-color:lightgreen;">
		<tr>
		<td><a id="openHandout" href="" target="_blank">到</a></td>
		<td id="pnlHandout"></td>
		<td id="tdHandout"></td>
		</tr>
	</table>


<div id="dvAudioLesson" style="width:100%; border:1px solid black">
  <audio id="myAudio" style="margin:0;padding:1px;width:99%" controls>
  <source src="" type="audio/mpeg">
  </audio>


<!--Audio 面板操作區 width="99%" -->
<table style="padding-top:0;margin-top:-5px;">
<tr style="background-color:#EEFFFF;">
	<td>
		<button onclick="theAud.cusPlay();">播於</button>
	</td>

	<td><!--起播 時分秒-->
		<table id="tblPlayStart"><tr><td>
	<input id="palyStartH" type="number" value="0"  min="0" max="5" style="width:1em;"></input>時
	<input id="palyStartM" type="number" value="0" min="0" max="59" style="width:1.5em;"></input>分
	<input id="palyStartS" type="number" value="0" min="0" max="59" style="width:1.5em;"></input>秒
		</td></tr></table>
	</td><!--起播 時分秒-->

<td>
	<button onclick="theAud.cusTime(1);">設起點</button>
	<button onclick="theAud.forbackward(1);" style="color:DodgerBlue;font-weight:bold;">&lt;&lt;</button>

	<button onclick="theAud.forbackward(0);" style="color:DodgerBlue;font-weight:bold;">&gt;&gt;</button>
</td>


</tr></table><!--Audio 面板操作區-->


<!--cue、文檔操作區  width="99%" -->
<table><tr>

<!--文檔操作區-->
<td>
	<table style="padding:3px 5px;background-color:yellow;"><tr>

	<td>
			<button onclick="rstContHandFontSize('-')" style="padding-right:4px;color:DodgerBlue;">─</button>
			<span id="contFontSize" style="background-color:white;padding-left:3px;padding-right:3px;border:1px black solid;">96</span>
			<button style="color:DodgerBlue;margin-right:0.5em;" onclick="rstContHandFontSize('+')">✚</button>
	</td>
		
	<td>
		<select style="width:4em;font-size:95%;" id="pageList" onchange="theBook.onPageListChange(this)"></select>
	</td>

	<td>
		<select style="width:4em;font-size:95%;display:none" id="pageList_hand" onchange="theBook.onPageListChange(this)"></select>
	</td>
	
	<td>
		<button id="toggleAux" onclick="toggleAux(this)" class="toggle" style="margin-left:6px;">原著</button>
	<td>

	<td>
		<button id="btnYinMenu" onclick="theBook.showPageTocSelect(this)">目次</button>
	</td>
	<td>
			<button id="btnOpenAux" onclick="document.all.dlgHandout.showModal()" style="display:none">開啟</button>
	</td>

	<td>
			<button id="toggleBR" style="display:none;" onclick="toggleBR()" class="toggle">段</button>
	</td>
	</tr></table>
</td><!--文檔操作區-->

</tr></table><!--cue、文檔操作區-->

</div><!-- id="dvAudioLesson"-->



<!--文章顯示區-->

<div id="content" onscroll="theBook.TryScroll(event);" class="essay"></div>

<div id="auxPanel" class="essay" style="display:none;"></div>



<dialog id="dlgCue">
<button onclick="theAud.closeCue()" class="dlgCloser">✖</button>
<p class="dlgTitle">法師授課主題時點表</p>

<select id="cueList" style="width:16em;">
</select>

<div style="text-align:right;margin-top:2em;">
	<input type="checkbox" id="bookTo" checked>書本定位</input>　
	<button onclick="theAud.cuePointPlay()">播放</button>
</div>
</dialog>


<dialog id="dlgHandout">
<button onclick="this.parentNode.close()" class="dlgCloser">✖</button>
<p class="dlgTitle">補充講義選單</p>

<select id="auxDataList" style="width:20em;">
<option>真常大我_真常妙有</option>
</select>

<p style="text-align:right;margin-top:2em;;margin-bottom:0px;">
	<button onclick="theBook.openAuxData();this.parentNode.parentNode.close()">開啟</button>
</p>
</dialog>

<dialog id="dlgPageToc" style="height:80%;width:90%;">
<button onclick="document.all.dlgPageToc.close()"  class="dlgCloser">✖</button>

<p class="dlgTitle">目次選單</p>
<hr/>
<!--height:21em;	-->
<div id="mnuArea" style="width:100%;padding:0;margin:0;padding:0">
<ul id="mnuRoot" class="menutree" onclick="onMenuClicked(event)" style="height:18em;overflow-y:scroll;margin-left:0;margin-top:0;padding-left:20px;padding-top:0"></ul>
</div>

</dialog>
</body>
</html>
